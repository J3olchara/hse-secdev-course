# P09 - SBOM & SCA

## Что сделано

Настроен автоматический SBOM и SCA сканирование зависимостей проекта.

### Инструменты

- **SBOM генерация**: Syft v1.18.1 (Anchore) - формат CycloneDX JSON
- **SCA сканирование**: Grype v0.84.0 (Anchore) - анализ уязвимостей

Версии инструментов зафиксированы в workflow для воспроизводимости результатов.

### Артефакты

- `sbom.json` - полный Software Bill of Materials проекта
- `sca_report.json` - детальный отчет по уязвимостям
- `sca_summary.md` - краткая сводка с планом действий
- `metadata.txt` - метаданные: коммит, ветка, версии инструментов
- `README.md` - описание для DS1 секции итогового отчета

### Найденные проблемы

По результатам сканирования обнаружено:
- **1 Critical** уязвимость (python-jose)
- **6 High** уязвимостей (python-multipart, ecdsa, starlette)
- **2 Medium** уязвимости

### Принятые решения

Для критичных уязвимостей оформлены waivers в `policy/waivers.yml`:
- python-jose - требуется дополнительный анализ, сейчас есть доп проверки
- python-multipart - функционал загрузки файлов отключен в продакшене

### Workflow

CI workflow `.github/workflows/ci-sbom-sca.yml` запускается:
- При изменении Python файлов
- При изменении requirements*.txt
- Вручную через workflow_dispatch

Артефакты автоматически сохраняются в GitHub Actions.

### Дальнейшие шаги

1. Обновить python-multipart если выйдет патч
2. Провести детальный анализ уязвимости в python-jose
3. Настроить автоматические уведомления о новых уязвимостях
4. Периодически пересматривать waivers (проверять expires_at)
