# RISKS — Реестр рисков

> Оценка: L (1..5), I (1..5), Risk = L×I
> **Шкала оценки:**
> - L (Likelihood): 1=Очень редко, 2=Редко, 3=Возможно, 4=Вероятно, 5=Очень вероятно
> - I (Impact): 1=Минимальный, 2=Низкий, 3=Средний, 4=Высокий, 5=Критический

## Quick Wins (быстрые победы) — приоритетные риски для немедленной обработки
- **R1**: Брутфорс атаки на аутентификацию — высокий риск из-за публичного доступа
- **R2**: SQL injection — критично для целостности данных
- **R3**: Утечка JWT секретов — компрометация всех сессий

| RiskID | Описание | Связь (F/NFR) | L | I | Risk | Стратегия | Владелец | Срок | Критерий закрытия |
|--------|----------|---------------|---|---|------|-----------|----------|------|-------------------|
| **R1** | **Брутфорс атаки на /auth/login** — злоумышленник может перебирать пароли для получения доступа к аккаунтам пользователей | F1, **NFR-06**, **NFR-01** | 4 | 5 | 20 | Снизить | @security-team | 2024-01-15 | Rate limiting (5 попыток/мин/IP) + CAPTCHA после 3 неудач + account lockout |
| **R2** | **SQL injection в запросах к базе данных** — через вредоносный ввод в поля title/description желаний | F3,F7, **NFR-08** | 3 | 5 | 15 | Избежать | @backend-dev | 2024-01-20 | 100% parameterized queries + input sanitization + ORM validation |
| **R3** | **Компрометация JWT секретного ключа** — все активные сессии станут недействительными, возможен массовый захват аккаунтов | F6, **NFR-05** | 2 | 5 | 10 | Снизить | @devops-team | 2024-01-25 | Key rotation policy + secure key storage (HSM/Kubernetes secrets) + short token expiration |
| **R4** | **Несанкционированный доступ к чужим желаниям** — пользователи могут просматривать/изменять данные других пользователей | F2,F4,F5, **NFR-05** | 4 | 4 | 16 | Снизить | @backend-dev | 2024-02-01 | Strict JWT validation + user_id verification in all endpoints + row-level security |
| **R5** | **DDoS атака на API эндпоинты** — сервис может стать недоступным для легитимных пользователей | F1-F5, **NFR-06** | 3 | 4 | 12 | Снизить | @devops-team | 2024-02-10 | WAF rules + rate limiting per endpoint + auto-scaling + CDN integration |
| **R6** | **Утечка PII данных из базы** — хранение личной информации без должной защиты может привести к штрафам GDPR | F7, **NFR-07** | 2 | 5 | 10 | Снизить | @security-team | 2024-02-15 | Database encryption at rest + access logging + regular security audits |
| **R7** | **Внедрение вредоносного контента** — XSS атаки через пользовательский контент в описаниях желаний | F3, **NFR-08** | 3 | 3 | 9 | Снизить | @frontend-dev | 2024-02-20 | Content Security Policy + output encoding + input sanitization |
| **R8** | **Отсутствие аудита действий** — невозможно отследить кто и когда изменял/удалял желания | F4,F5, **NFR-10** | 4 | 2 | 8 | Принять | @product-owner | 2024-03-01 | Audit logging для всех CRUD операций + immutable log storage |
| **R9** | **Переполнение базы данных** — пользователи могут создавать тысячи желаний, вызывая деградацию производительности | F3,F7, **NFR-06** | 3 | 3 | 9 | Снизить | @backend-dev | 2024-03-15 | Pagination (max 100 per page) + rate limiting per user + database cleanup policies |
| **R10** | **Утечка деталей ошибок** — подробные сообщения об ошибках могут раскрывать внутреннюю структуру приложения | F1-F5, **NFR-02** | 3 | 2 | 6 | Снизить | @backend-dev | 2024-03-20 | Generic error messages in production + detailed logging for debugging only |

## Риски принятые как допустимые (риск < 8)
- **R8** (Audit logging): Принимаем как допустимый для MVP, но планируем добавить в следующих релизах
- **R10** (Error disclosure): Низкий impact, баланс между удобством разработки и безопасностью

## Риски для мониторинга (Medium-High)
- **R1, R2, R4**: Критические для безопасности — еженедельный мониторинг
- **R5**: Infrastructure риски — мониторинг через alerting системы
- **R6**: Compliance риски — quarterly аудиты
